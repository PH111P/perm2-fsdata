// dewford gym lighting
#include "scriptlib.m4.h"

SET_REGISTER( 2, 0 )

// Check how many gym trainers got defeated

CHECK_FLAG( 150, 0, 2 )
    // player defeated brawly
    SET_WEATHER( WEATHER_REGULAR )
    JUMP_TO_END

CHECK_TRAINER_FLAG( 42, 0, 1 )
    ADD_CONSTANT_TO_REGISTER( 2, 1 )
CHECK_TRAINER_FLAG( 41, 0, 1 )
    ADD_CONSTANT_TO_REGISTER( 2, 1 )
CHECK_TRAINER_FLAG( 40, 0, 1 )
    ADD_CONSTANT_TO_REGISTER( 2, 1 )
CHECK_TRAINER_FLAG( 39, 0, 1 )
    ADD_CONSTANT_TO_REGISTER( 2, 1 )
CHECK_TRAINER_FLAG( 38, 0, 1 )
    ADD_CONSTANT_TO_REGISTER( 2, 1 )
CHECK_TRAINER_FLAG( 37, 0, 1 )
    ADD_CONSTANT_TO_REGISTER( 2, 1 )

DIVIDE_REGISTER_BY_CONSTANT( 2, 2 )

CHECK_REGISTER_N( 2, 0, 2 )
    SET_WEATHER( WEATHER_DARK_PERMANENT )
    JUMP_TO_END
CHECK_REGISTER_N( 2, 1, 2 )
    SET_WEATHER( WEATHER_FLASH_1 )
    JUMP_TO_END
CHECK_REGISTER_N( 2, 2, 2 )
    SET_WEATHER( WEATHER_FLASH_2 )
    JUMP_TO_END
CHECK_REGISTER_N( 2, 3, 2 )
    SET_WEATHER( WEATHER_DARK_FLASH_USED )
    JUMP_TO_END
SET_WEATHER( WEATHER_REGULAR )
END_OF_PROGRAM
